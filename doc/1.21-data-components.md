# Draft for required data components
This document lays out potential data components needed to represent all relevant item data from the 1.20.1 version of
Botania in newer versions. Wherever possible, vanilla components will be reused, but only within reason.

Also see [NBT documentation for 1.20.1](nbt-reference-1.20.1.md), which lists the data the components need to represent.

## Botania Data Components
- `botania:elven_unlock` (boolean) - For Lexica Botania to unlock the Alfheim look.
- `botania:wand_colors` (two DyeColors) - Colors of the two petals on the Wand of the Forest. Useful for the crafting recipe implementation, too.
- `botania:wand_bind_mode` (boolean) - Whether the wand is in bind mode.
- `botania:binding_pos` (GlobalPos) - Selected binding position for Wand of the Forest and Ring of Loki.
    (Upgraded to GlobalPos to detect attempts of cross-dimension binding.)
- `botania:lens_tint` (DyeColor) - Tint color, if any is applied.
- `botania:lens_rainbow_tint` (void) - Rainbow tint, if applied.
- `botania:attached_lens` (ItemStack) - A lens item that was added to this lens. (e.g. composite lens, or lens attached to a mana blaster)
- `botania:skies_rod_data` (player flying state, boost duration) - TODO: maybe make it more customizable?
- `botania:shifting_crust_rod_data` (…) - TODO: maybe it makes sense to split this up into similar categories as in the NBT reference?
- `botania:shaded_mesa_rod_data` (…) - State data for using the rod.
- `botania:phantom_inked` (void) - Marker that the item had Phantom Ink applied.
- `botania:ancient_wills` (set of IDs) - Container for the set of ancient wills applied to the item.
    Wills are only represented as their item resource location. (Semantic should be "linked hash map" to preserve order,
    but can likely be represented by an ObjectArraySet due to the limited size.)
- `botania:elementium_tipped` (void) - If present on a Terra Shatterer, applies elementium pick voiding approach.
- `botania:active` (boolean) - Whether the item is "activated", whatever that may mean for a specific item.
- `botania:mana` (int) - Amount of mana stored in the item. This does not necessarily mean that mana is accessible.
- `botania:max_mana` (int) - Maximum amount of mana this item can hold.
- `botania:can_receive_mana_from_item` (void) - This item accepts mana from mana-generating items, such as a Band of Aura. (Should not be set for creative items.)
- `botania:can_receive_mana_from_pool` (void) - This item accepts mana while in a mana pool. (Should not be set for creative items.)
- `botania:can_export_mana_to_item` (void) - This item can provide mana to mana-consuming items.
- `botania:can_export_mana_to_pool` (void) - This item can release mana while in a mana pool.
- `botania:creative_mana` (void) - Marks a "creative mode" mana item that does not run out of mana.
- `botania:mana_backlog` (int) - Accumulated difference in mana amount that needs to be synchronized when the opportunity arises.
- `botania:mana_pool_pos` (GlobalPos) - Location of bound pool for mana mirror.
- `botania:last_trigger_time` (long) - Last game time this item's effect triggered.
- `botania:lens_clip` (…) - Mana blaster lens clip data, i.e. clip position and up to six lens ItemStacks.
- `botania:cooldown` (int) - Remaining cooldown ticks of the item.
- `botania:stored_recipes` (list of potentially empty recipe IDs) - Stored recipes of an Assembly/Manufactory Halo.
- `botania:last_recipe` (recipe ID) - Last recipe manually crafted with this Assembly/Manufactory Halo.
- `botania:rotation_base` (float) - Player's horizontal view direction at the time they selected the halo item.
- `botania:inventory` (list of potentially empty ItemStacks) - Content of a flower/petal pouch or bauble box.
    TODO: is there a generic way that items like backpacks represent their content?
- `botania:block` (Block) - Block type assigned to Black Hole Talisman or selected for Astrolabe.
- `botania:block_count` (int) - Number of blocks stored in Black Hole Talisman.
- `botania:mob_name` (translation key string) - Name of an entity. (used by Cacophonium and Life Aggregator)
- `botania:center_pos` (GlobalPos) - Center of the shape being created with the Sextant.
- `botania:sextant_mode` (?) - Active mode of the Sextant.
- `botania:size` (int) - Size of Astrolabe placement. (Any other uses?)
- `botania:open` (boolean) - Whether to display the item as "open". (for bauble box)
- `botania:cosmetic_override` (ItemStack) - A cosmetic bauble that overrides how this bauble looks.
    If the override is a Manaseer Monocle, the item also inherits the monocle's visualization effects.
- `botania:planestrider_state` (speed and last player position) - State of the Planestrider Sash's speed boost,
    which tracks the current speed and the last position to detect when the player stops.
- `botania:spectator_highlight_entities` (list of entities) - Entities highlighted by The Spectator.
- `botania:spectator_highlight_blocks` (list of block positions) - Block positions highlighted by The Spectator.
- `botania:tiara_variant` (int) - Flügel Tiara wing type ID (0 = none)
- `botania:flying` (boolean) - Player is currently using creative flight.
- `botania:tiara_gliding` (boolean) - Player is currently using Tiara glide. (TODO: Turn Tiara into an elytra variant instead?)
- `botania:remaining_time` (int) - Remaining time in ticks. (for Tiara: time until creative flight ends or costs more)
- `botania:remaining_uses` (int) - Number of times this item can still be used. (defaults to 4 for vials, 6 for flasks and bottled mana)
- `botania:random_seed` (long) - Random seed for mana bottle effect sequence.
- `botania:shard_level` (int) - Level of Laputa Shard.
- `botania:shard_pointy` (boolean) - Sets the Laputa Shard's island shape to pointy (true) or not pointy (false) instead of leaving it up to randomness.
- `botania:shard_height_scale` (float) - Sets the Laputa Shard's island height relative to its horizontal radius instead of leaving it up to randomness.
- `botania:laputa_state` (…) - Internal state for the Laputa shard mana burst logic.
- `botania:resolute_ivy` (void) - Marks the item as having Resolute Ivy applied.
- `botania:soulbound` (UUID) - UUID of the owning player for a soul-bound item, usually relics from gaia fight.
- `botania:weapons_spawned` (int) - Number of projectiles spawned (but not yet released) by the Key of the King's Law.
- `botania:bound_positions` (Map<ID, BlockPos>) - Bound teleportation target locations for each dimension.
- `botania:brew` (ID) - Type of brew infused into this item. (vial, flask, tainted blood pendant, incense stick)
- `botania:offset_list` (List<BlockPos>) - Offsets selected for the Ring of Loki.
- `botania:next_color` (DyeColor) - Next color of wool/sheep a Spectrolus expects. (remembered block entity state)
- `botania:color_sequence` (List<DyeColor>) - Color sequence for Spectrolus.
    Initialized from world seed for new flowers, initialized from native dye color order for migrated existing flowers.
- `botania:gourmaryllis_streak_data` (list of item stacks, number of repetitions for last item, streak length) -
    Remembered state of streak for Gourmaryllis.
- `botania:rafflowsia_streak_data` (list of flower types \[block entity types?], number of repetitions for last flower, streak length) -
    Remembered state of streak for Rafflowsia.
- `botania:island_type` (?) - Type of soil of a floating flower's island. TODO: should this store blocks, items, or a different type of ID?

## Botania Items
- any items:
  - `botania:resolute_ivy` (if ivy is applied)
  - `botania:phantom_ink` (if phantom ink was applied, assuming it can be applied to the item)
- any bauble items:
  - TODO: do we still need the UUID for attribute modifiers?
  - `botania:cosmetic_override` (if an override is defined)
- any soul-bound items (dice, relics):
  - `botania:soulbound`
- LexicaBotaniaItem:
  - `botania:elven_unlock`
- WandOfTheForestItem:
  - `botania:wand_colors`
  - `botania:wand_bind_mode`
  - `botania:binding_pos` (if binding anything)
- LensItem:
  - `botania:lens_tint` or `botania:lens_rainbow_tint` (if it has any color at all)
  - `botania:attached_lens` (if composite)
- SkiesRodItem:
  - `botania:skies_rod_data` (unless idle)
- ShiftingCrustRodItem:
  - `botania:shifting_crust_rod_data` (not sure if it makes sense to split it up)
- ShadedMesaRodItem:
  - `botania:shaded_mesa_rod_data` (while in use)
- TerrasteelHelmItem:
  - vanilla components that apply to armor items
  - `botania:ancient_wills` (if any wills are attached)
- TerraShattererItem:
  - vanilla components that apply to digging tool items
  - `botania:elementium_tipped` (if tipped)
  - `botania:mana` (defaults to 0)
  - `botania:max_mana` (defaults to Integer.MAX_VALUE)
  - `botania:can_receive_mana_from_pool` (not from items, and no export whatsoever)
  - `botania:active` (defaults to false)
- StarcallerItem:
  - `botania:last_trigger_time`
- VitreousPickaxeItem:
  - vanilla components that apply to digging tool items
  - do we need the temporary hack for glass mining as item component?
- ManaTabletItem:
  - `botania:mana` (defaults to 0, but there's also a variant in the Creative inventory with this set to max mana)
  - `botania:max_mana` (defaults to 500_000)
  - `botania:creative_mana` (only for the creative tablet from creative inventory)
  - `botania:can_receive_mana_from_item` (unless it's a creative tablet)
  - `botania:can_receive_mana_from_pool` (unless intended to be single-use)
  - `botania:can_export_mana_to_item`
  - `botania:can_export_mana_to_pool`
- ManaMirrorItem:
  - `botania:mana` (manually synchronized with bound pool)
  - `botania:max_mana` (defaults to bound pool's size)
  - `botania:can_export_mana_to_item`
  - `botania:mana_backlog` (amount of mana used since last synchronization)
  - `botania:mana_pool_pos` (if bound to a pool)
- ManaBlasterItem:
  - `botania:cooldown` (since it's supposed to be per item)
  - `botania:attached_lens` (unless a clip is used)
  - `botania:lens_clip` (if it has a lens clip; handles storage and selection of lenses)
- LifeAggregatorItem:
  - `botania:block` (type of captured block)
  - `minecraft:block_entity_data` (if a spawner was captured)
  - `botania:mob_name` (if spawner was captured)
- AssemblyHaloItem:
  - `botania:last_recipe`
  - `botania:stored_recipes`
  - `botania:rotation_base` (while selected)
- ManufactoryHaloItem:
  - same as AssemblyHaloItem
  - `botania:active` (whether it should autocraft if not selected; defaults to true)
- FlowerPouchItem:
  - `botania:inventory` (size 32; probably ordered in vanilla display order)
  - `botania:active` (should probably support this somehow)
- (future) PetalPouchItem:
  - `botania:inventory` (size 16; probably ordered in vanilla display order)
  - `botania:active` (as it autocrafts flowers into petals)
- BlackHoleTalismanItem:
  - `botania:block`
  - `botania:block_count`
  - `botania:active`
- StoneOfTemperanceItem:
  - `botania:active`
- CacophoniumItem:
  - `minecraft:note_block_sound` (captured mob sound)
  - `botania:mob_name`
- SlimeInABottleItem:
  - `botania:active` (while player is in a slime chunk)
- SextantItem: (let's rename that to match the AstrolabeItem)
  - `botania:center_pos`
  - `botania:sextant_mode`
- AstrolabeItem:
  - `botania:block`
  - `botania:size`
- BaubleBoxItem:
  - `botania:inventory` (size 24)
  - `botania:open` (true while UI is open)
- BandOfManaItem:
  - `botania:mana`
  - `botania:max_mana` (defaults to 500_000 for regular, 2_000_000 for greater band)
  - `botania:can_receive_mana_from_item`
  - `botania:can_receive_mana_from_pool`
  - `botania:can_export_mana_to_item`
  - `botania:can_export_mana_to_pool`
- RingOfMagnetizationItem:
  - `botania:cooldown` (after player tossed an item)
- RingOfDexterousMotionItem:
  - `botania:cooldown`
- PlanestriderSashItem:
  - `botania:planestrider_state`
- CloakOfVirtueItem (and subclasses):
  - `botania:cooldown`
  - Do we need that temporary flag to prevent recursion on the item?
- SpectatorItem:
  - `botania:spectator_highlight_entities`
  - `botania:spectator_highlight_blocks`
- FlugelTiaraItem:
  - `botania:tiara_variant` (defaults to 0 for no wings, creative inventory also provides IDs 1 to 8)
  - `botania:flying`
  - `botania:tiara_gliding` (unless we turn it into an elytra item)
  - `botania:remaining_time`
  - boosting is moved to the dodge ring
- BottledManaItem:
  - `botania:remaining_uses`
  - `botania:random_seed`
- LaputaShardItem:
  - `botania:shard_level`
  - `botania:shard_pointy` (optional, to override random pick)
  - `botania:shard_height_scale` (optional, to override random pick)
  - `botania:laputa_state` (only while used as lens item for the mana bursts that actually move the blocks)
- KeyOfTheKingsLawItem:
  - `botania:weapons_spawned`
  - `botania:active` (while being charged up)
- EyeOfTheFlugelItem:
  - `botania:bound_positions`
- RingOfLokiItem:
  - `botania:binding_pos` (origin while editing the list of offsets)
  - `botania:offset_list`
- BaseBrewItem (vial/flask):
  - `botania:brew`
  - `botania:remaining_uses`
- IncenseStickItem, TaintedBloodPendantItem:
  - `botania:brew`

## Botania Block Entities
- any floating flower:
  - `botania:island_type`
- Gourmaryllis:
  - `botania:gourmaryllis_streak_data` (if previously ate anything)
- Hydroangeas:
  - `botania:cooldown` (unless zero, just an option for mapmakers)
  - `botania:remaining_time` (time until decay)
- Munchdew:
  - `botania:cooldown` (if it entered its cooldown after eating)
- Rafflowsia:
  - `botania:rafflowsia_streak_data` (if it consumed any flowers already)
- Spectrolus:
  - `botania:next_color` (defaults to first color in sequence)
  - `botania:color_sequence` (initialized from world seed on placement; initialized to native dye order if missing)
- Thermalily:
  - `botania:cooldown`
